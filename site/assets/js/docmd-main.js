/*!
 * --------------------------------------------------------------------
 * docmd : the minimalist, zero-config documentation generator.
 *
 * @package     @docmd/core (and ecosystem)
 * @website     https://docmd.io
 * @repository  https://github.com/docmd-io/docmd
 * @license     MIT
 * @copyright   Copyright (c) 2025-present docmd.io
 *
 * [docmd-source] - Please do not remove this header.
 * --------------------------------------------------------------------
 */
function initializeCollapsibleNav(){const n=document.querySelector(".sidebar-nav");n&&(n.querySelectorAll("li.collapsible").forEach(e=>{e.classList.contains("expanded")?e.setAttribute("aria-expanded","true"):e.setAttribute("aria-expanded","false")}),n.addEventListener("click",e=>{const t=e.target.closest(".collapse-icon-wrapper");if(t){e.preventDefault(),e.stopPropagation();const o=t.closest("li.collapsible");return o&&(o.classList.contains("expanded")?(o.classList.remove("expanded"),o.setAttribute("aria-expanded","false")):(o.classList.add("expanded"),o.setAttribute("aria-expanded","true"))),!1}}))}function initializeMobileMenus(){const n=document.querySelector(".sidebar-menu-button"),e=document.querySelector(".sidebar");n&&e&&n.addEventListener("click",s=>{s.stopPropagation(),e.classList.toggle("mobile-expanded")});const t=document.querySelector(".toc-menu-button"),o=document.querySelector(".toc-container"),c=document.querySelector(".toc-title"),i=s=>{window.getComputedStyle(t).display!=="none"&&(s.stopPropagation(),o.classList.toggle("mobile-expanded"))};t&&o&&(t.addEventListener("click",i),c&&c.addEventListener("click",i))}function initializeSidebarScroll(){const n=document.querySelector(".sidebar");n&&requestAnimationFrame(()=>{const e=n.querySelector("a.active");e&&e.scrollIntoView({behavior:"auto",block:"center",inline:"nearest"})})}function setupThemeToggleListener(){const n=document.querySelectorAll(".theme-toggle-button");function e(t){const c=["light","dark"].includes(t)?t:"light";document.documentElement.setAttribute("data-theme",c),document.body.setAttribute("data-theme",c),localStorage.setItem("docmd-theme",c);const i=document.getElementById("hljs-light"),s=document.getElementById("hljs-dark");i&&s&&(c==="dark"?(i.disabled=!0,s.disabled=!1):(i.disabled=!1,s.disabled=!0))}n.forEach(t=>{const o=t.cloneNode(!0);t.parentNode.replaceChild(o,t),o.addEventListener("click",()=>{const i=(document.documentElement.getAttribute("data-theme")||"light")==="light"?"dark":"light";e(i)})})}function initializeSidebarToggle(){const n=document.getElementById("sidebar-toggle-button"),e=document.body;if(!e.classList.contains("sidebar-collapsible")||!n)return;const t=e.dataset.defaultCollapsed==="true";let o=localStorage.getItem("docmd-sidebar-collapsed");o===null?o=t:o=o==="true",o&&e.classList.add("sidebar-collapsed"),n.addEventListener("click",()=>{e.classList.toggle("sidebar-collapsed");const c=e.classList.contains("sidebar-collapsed");localStorage.setItem("docmd-sidebar-collapsed",c)})}function initializeTabs(){document.querySelectorAll(".docmd-tabs").forEach(n=>{const e=n.querySelectorAll(".docmd-tabs-nav-item"),t=n.querySelectorAll(".docmd-tab-pane");e.forEach((o,c)=>{o.addEventListener("click",()=>{e.forEach(i=>i.classList.remove("active")),t.forEach(i=>i.classList.remove("active")),o.classList.add("active"),t[c]&&t[c].classList.add("active")})})})}function initializeCopyCodeButtons(){if(document.body.dataset.copyCodeEnabled!=="true")return;const n='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg>',e='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-check"><polyline points="20 6 9 17 4 12"></polyline></svg>';document.querySelectorAll("pre").forEach(t=>{const o=t.querySelector("code");if(!o)return;const c=document.createElement("div");c.style.position="relative",c.style.display="block",t.parentNode.insertBefore(c,t),c.appendChild(t),t.style.position="static";const i=document.createElement("button");i.className="copy-code-button",i.innerHTML=n,i.setAttribute("aria-label","Copy code to clipboard"),c.appendChild(i),i.addEventListener("click",()=>{navigator.clipboard.writeText(o.innerText).then(()=>{i.innerHTML=e,i.classList.add("copied"),setTimeout(()=>{i.innerHTML=n,i.classList.remove("copied")},2e3)}).catch(s=>{console.error("Failed to copy text: ",s),i.innerText="Error"})})})}function syncBodyTheme(){const n=document.documentElement.getAttribute("data-theme");n&&document.body&&document.body.setAttribute("data-theme",n)}function initializeScrollSpy(){const n=document.querySelectorAll(".toc-link"),e=document.querySelectorAll(".main-content h2, .main-content h3");if(n.length===0||e.length===0)return;const t={root:null,rootMargin:"-10% 0px -80% 0px",threshold:0},o=new IntersectionObserver(c=>{c.forEach(i=>{if(i.isIntersecting){n.forEach(a=>a.classList.remove("active"));const s=i.target.getAttribute("id"),l=document.querySelector(`.toc-link[href="#${s}"]`);l&&l.classList.add("active")}})},t);e.forEach(c=>o.observe(c))}document.addEventListener("DOMContentLoaded",()=>{syncBodyTheme(),setupThemeToggleListener(),initializeSidebarToggle(),initializeTabs(),initializeCopyCodeButtons(),initializeCollapsibleNav(),initializeMobileMenus(),initializeSidebarScroll(),initializeScrollSpy()});
